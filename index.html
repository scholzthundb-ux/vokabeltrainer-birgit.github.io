<!doctype html>
<html lang="de">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Vokabeltrainer – NEU</title>

<style>
  body { margin:0; font-family:system-ui,sans-serif; background:#0b0b0d; color:#f2f2f3; }
  header { background:#111114; padding:12px; border-bottom:1px solid #23232a; display:flex; gap:10px; flex-wrap:wrap; }
  button, textarea { background:#17171d; color:#f2f2f3; border:1px solid #2a2a33; border-radius:12px; padding:10px 12px; }
  button { cursor:pointer; }
  main { padding:12px; max-width:900px; margin:auto; }
  textarea { width:100%; min-height:140px; font-size:16px; }
  .card { background:#111114; border:1px solid #23232a; border-radius:18px; padding:14px; margin-bottom:12px; }
  .muted { color:#b7b7c2; font-size:12px; }

  /* Vollbild-Abfrage */
  body.quiz header, body.quiz main { display:none; }
  #quiz { display:none; }
  body.quiz #quiz { display:flex; }
  #quiz { position:fixed; inset:0; background:#0b0b0d; flex-direction:column; }
  .qcard { flex:1; display:flex; align-items:center; justify-content:center; text-align:center; font-size:38px; font-weight:900; padding:20px; cursor:pointer; }
  .answer { font-size:34px; font-weight:800; margin-top:20px; }
  .hidden { display:none; }
  .bottom { display:flex; gap:10px; justify-content:center; padding:12px; border-top:1px solid #23232a; }
</style>
</head>

<body>

<!-- TEST-BANNER (muss sichtbar sein!) -->
<div style="position:fixed;top:0;left:0;right:0;background:#ff0055;color:#fff;font-weight:900;text-align:center;padding:10px;z-index:9999;">
NEUER TRAINER – TEST
</div>

<header>
  <button onclick="enterQuiz()">Abfrage</button>
  <button onclick="exitQuiz()">Karten</button>
</header>

<main>
  <div class="card">
    <div class="muted">Import: Deutsch;Spanisch</div>
    <textarea id="import"></textarea>
    <button onclick="importCards()">Importieren</button>
  </div>
</main>

<div id="quiz">
  <div class="qcard" onclick="toggleAnswer()">
    <div>
      <div id="q">—</div>
      <div id="a" class="answer hidden">—</div>
    </div>
  </div>
  <div class="bottom">
    <button onclick="next()">Nächste</button>
  </div>
</div>

<script>
let cards = [];
let current = null;
let show = false;

function importCards(){
  const lines = document.getElementById("import").value.split("\n");
  const added = [];
  for (const l of lines){
    const line = l.trim();
    if (!line) continue;
    const p = line.split(";");
    if (p.length >= 2){
      added.push({q: p[0].trim(), a: p.slice(1).join(";").trim()});
    }
  }
  cards.push(...added);
  document.getElementById("import").value="";
  alert(cards.length + " Karten insgesamt");
}

function enterQuiz(){
  document.body.classList.add("quiz");
  next();
}

function exitQuiz(){
  document.body.classList.remove("quiz");
}

function next(){
  if (!cards.length){
    document.getElementById("q").textContent="Keine Karten";
    document.getElementById("a").textContent="";
    return;
  }
  current = cards[Math.floor(Math.random()*cards.length)];
  show=false;
  document.getElementById("q").textContent=current.q;
  document.getElementById("a").textContent=current.a;
  document.getElementById("a").classList.add("hidden");
}

function toggleAnswer(){
  if (!current) return;
  show=!show;
  document.getElementById("a").classList.toggle("hidden", !show);
}
</script>

</body>
</html>
